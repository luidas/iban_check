<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>iban_check.algorithm API documentation</title>
<meta name="description" content="Module to check iban. Does not validate bban.
Provides some helper functions and a registry." />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>iban_check.algorithm</code></h1>
</header>
<section id="section-intro">
<p>Module to check iban. Does not validate bban.
Provides some helper functions and a registry.</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;
Module to check iban. Does not validate bban.
Provides some helper functions and a registry.
&#34;&#34;&#34;
import json
import string

from pathlib import Path


with open(Path(&#34;iban_registry.json&#34;), encoding=&#34;utf8&#34;) as f:
    REGISTRY = json.load(f)


LETTERS = {
    letter: (10 + index) for index, letter in enumerate(string.ascii_uppercase)
}


def check_length(iban: str) -&gt; bool:
    &#34;&#34;&#34;Return True if IBAN length is correct per the country.&#34;&#34;&#34;
    country_code = iban[0:2]
    if country_code in REGISTRY.keys():
        return REGISTRY[country_code][&#34;iban_length&#34;] == len(iban)
    return False


def rearrange(iban: str) -&gt; str:
    &#34;&#34;&#34;Return the IBAN with first 4 characters at the end&#34;&#34;&#34;
    return iban[4:] + iban[:4]


def convert_to_integer(iban: str) -&gt; int:
    &#34;&#34;&#34;
    Return IBAN with each letter replaced with two digits,
    where A = 10, B = 11, ..., Z = 35
    &#34;&#34;&#34;
    integer = &#34;&#34;
    for char in iban:
        if char.isalpha():
            integer += str(LETTERS[char.upper()])
        else:
            integer += char
    return int(integer)


def validate_iban(iban: str) -&gt; bool:
    &#34;&#34;&#34;
    If length is valid:
    1. Rearrange
    2. Convert to integer
    3. Return if mod 97 remainder is equal to 1
    &#34;&#34;&#34;
    return check_length(iban) and convert_to_integer(rearrange(iban)) % 97 == 1


def replace_check_digits(iban: str) -&gt; str:
    &#34;&#34;&#34;Returns iban with 00 as country code&#34;&#34;&#34;
    return iban[0:2] + &#34;00&#34; + iban[4:]


def calculate_check_digits(iban: str) -&gt; int:
    &#34;&#34;&#34;
    1. Make country code 00
    2. Move first 4 characters to the end
    3. Return the difference between 98 and the remainder of mod 97
    &#34;&#34;&#34;
    return 98 - (
        convert_to_integer(rearrange(replace_check_digits(iban))) % 97
    )


def check_iban(iban: str) -&gt; bool:
    &#34;&#34;&#34;
    1. Check if iban is tring
    2. Remove all spaces
    3. Check if characters at check digit position are digits
    4. Calculate check digits
    5. Return True if iban is valid and calculated check digits = check digits
    &#34;&#34;&#34;
    if not isinstance(iban, str):
        return False
    iban = iban.replace(&#34; &#34;, &#34;&#34;)  # Parse
    check_digits = iban[2:4]
    if not check_digits.isdigit():
        return False
    return validate_iban(iban) and calculate_check_digits(iban) == int(
        check_digits
    )</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="iban_check.algorithm.calculate_check_digits"><code class="name flex">
<span>def <span class="ident">calculate_check_digits</span></span>(<span>iban: str) ‑> int</span>
</code></dt>
<dd>
<div class="desc"><ol>
<li>Make country code 00</li>
<li>Move first 4 characters to the end</li>
<li>Return the difference between 98 and the remainder of mod 97</li>
</ol></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def calculate_check_digits(iban: str) -&gt; int:
    &#34;&#34;&#34;
    1. Make country code 00
    2. Move first 4 characters to the end
    3. Return the difference between 98 and the remainder of mod 97
    &#34;&#34;&#34;
    return 98 - (
        convert_to_integer(rearrange(replace_check_digits(iban))) % 97
    )</code></pre>
</details>
</dd>
<dt id="iban_check.algorithm.check_iban"><code class="name flex">
<span>def <span class="ident">check_iban</span></span>(<span>iban: str) ‑> bool</span>
</code></dt>
<dd>
<div class="desc"><ol>
<li>Check if iban is tring</li>
<li>Remove all spaces</li>
<li>Check if characters at check digit position are digits</li>
<li>Calculate check digits</li>
<li>Return True if iban is valid and calculated check digits = check digits</li>
</ol></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def check_iban(iban: str) -&gt; bool:
    &#34;&#34;&#34;
    1. Check if iban is tring
    2. Remove all spaces
    3. Check if characters at check digit position are digits
    4. Calculate check digits
    5. Return True if iban is valid and calculated check digits = check digits
    &#34;&#34;&#34;
    if not isinstance(iban, str):
        return False
    iban = iban.replace(&#34; &#34;, &#34;&#34;)  # Parse
    check_digits = iban[2:4]
    if not check_digits.isdigit():
        return False
    return validate_iban(iban) and calculate_check_digits(iban) == int(
        check_digits
    )</code></pre>
</details>
</dd>
<dt id="iban_check.algorithm.check_length"><code class="name flex">
<span>def <span class="ident">check_length</span></span>(<span>iban: str) ‑> bool</span>
</code></dt>
<dd>
<div class="desc"><p>Return True if IBAN length is correct per the country.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def check_length(iban: str) -&gt; bool:
    &#34;&#34;&#34;Return True if IBAN length is correct per the country.&#34;&#34;&#34;
    country_code = iban[0:2]
    if country_code in REGISTRY.keys():
        return REGISTRY[country_code][&#34;iban_length&#34;] == len(iban)
    return False</code></pre>
</details>
</dd>
<dt id="iban_check.algorithm.convert_to_integer"><code class="name flex">
<span>def <span class="ident">convert_to_integer</span></span>(<span>iban: str) ‑> int</span>
</code></dt>
<dd>
<div class="desc"><p>Return IBAN with each letter replaced with two digits,
where A = 10, B = 11, &hellip;, Z = 35</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def convert_to_integer(iban: str) -&gt; int:
    &#34;&#34;&#34;
    Return IBAN with each letter replaced with two digits,
    where A = 10, B = 11, ..., Z = 35
    &#34;&#34;&#34;
    integer = &#34;&#34;
    for char in iban:
        if char.isalpha():
            integer += str(LETTERS[char.upper()])
        else:
            integer += char
    return int(integer)</code></pre>
</details>
</dd>
<dt id="iban_check.algorithm.rearrange"><code class="name flex">
<span>def <span class="ident">rearrange</span></span>(<span>iban: str) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>Return the IBAN with first 4 characters at the end</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def rearrange(iban: str) -&gt; str:
    &#34;&#34;&#34;Return the IBAN with first 4 characters at the end&#34;&#34;&#34;
    return iban[4:] + iban[:4]</code></pre>
</details>
</dd>
<dt id="iban_check.algorithm.replace_check_digits"><code class="name flex">
<span>def <span class="ident">replace_check_digits</span></span>(<span>iban: str) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>Returns iban with 00 as country code</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def replace_check_digits(iban: str) -&gt; str:
    &#34;&#34;&#34;Returns iban with 00 as country code&#34;&#34;&#34;
    return iban[0:2] + &#34;00&#34; + iban[4:]</code></pre>
</details>
</dd>
<dt id="iban_check.algorithm.validate_iban"><code class="name flex">
<span>def <span class="ident">validate_iban</span></span>(<span>iban: str) ‑> bool</span>
</code></dt>
<dd>
<div class="desc"><p>If length is valid:
1. Rearrange
2. Convert to integer
3. Return if mod 97 remainder is equal to 1</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def validate_iban(iban: str) -&gt; bool:
    &#34;&#34;&#34;
    If length is valid:
    1. Rearrange
    2. Convert to integer
    3. Return if mod 97 remainder is equal to 1
    &#34;&#34;&#34;
    return check_length(iban) and convert_to_integer(rearrange(iban)) % 97 == 1</code></pre>
</details>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="iban_check" href="index.html">iban_check</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="iban_check.algorithm.calculate_check_digits" href="#iban_check.algorithm.calculate_check_digits">calculate_check_digits</a></code></li>
<li><code><a title="iban_check.algorithm.check_iban" href="#iban_check.algorithm.check_iban">check_iban</a></code></li>
<li><code><a title="iban_check.algorithm.check_length" href="#iban_check.algorithm.check_length">check_length</a></code></li>
<li><code><a title="iban_check.algorithm.convert_to_integer" href="#iban_check.algorithm.convert_to_integer">convert_to_integer</a></code></li>
<li><code><a title="iban_check.algorithm.rearrange" href="#iban_check.algorithm.rearrange">rearrange</a></code></li>
<li><code><a title="iban_check.algorithm.replace_check_digits" href="#iban_check.algorithm.replace_check_digits">replace_check_digits</a></code></li>
<li><code><a title="iban_check.algorithm.validate_iban" href="#iban_check.algorithm.validate_iban">validate_iban</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>